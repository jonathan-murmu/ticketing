# Read Me

### Install - Docker, Kubectl, scaffold, ingress-nginx

1. Docker build
docker build -t jonathan92/auth . 

2. Docker push to docker hub 
docker push jonathan92/auth

2. Run Skaffold
skaffold dev

3. Local hosting
nano /etc/hosts

Add the below
127.0.0.1 ticketing.dev
Save the file.
===================
Opaque script in kube

kubectl create secret generic jwt-secret --from-literal=JWT_KEY=asdf
==============

For testing
npm install --save-dev @types/jest @types/supertest jest ts-jest supertest mongodb-memory-server
=================
for listing serices from another namspace. 
$ kubectl get services -n ingress-nginx

=====================
update the common library
$ npm run build
$ npm publish
or $ npm run pub

then go to the required microservice;
$ npm run update @ticketsjm92/common; 
====================
SSH into a pod
$ kubectl exec -it auth-depl-6f77f95498-8gq2x sh
==================
Port forwarding for Nats test server.
kubectl port-forward nats-depl-58c86fb7b8-p65rn 4222:4222
==============

# Troubleshoot.

1. On git commit, the below error:
error: cannot run gpg: No such file or directory

error: could not run gpg.

fatal: failed to write commit object (128)

Fix:
$ git config --global commit.gpgsign false

